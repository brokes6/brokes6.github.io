<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="apple-touch-icon" href="/icons-192.png">
  <link rel="manifest" href="/manifest.json">

  

  

  
    <meta name="author" content="Fuxinbo">
  

  

  

  <title>Roomæ•°æ®åº“çš„ä½¿ç”¨ | Fuxinboåšå®¢</title>

  

  
    <link rel="icon" href="/favicon.ico">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@1.1.3/index.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs@9.16.2/styles/monokai.css">
  

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>
<body>
  <div class="root-container">
    
<!-- header container -->
<header class="header-container post">
  
    <div class="post-image" style="background-image: url(https://qiniu.miiiku.xyz/src/images/banner.jpg)"></div>
  

  <!-- navbar -->
<nav class="navbar">
  <div class="navbar-content">
    <!-- logo -->
    <div class="navbar-logo">
      <a href="/">
        
          Fuxinboåšå®¢
        
      </a>
    </div>
    <!-- link -->
    <div class="navbar-link">
      <div class="navbar-btn">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <ul class="navbar-list">
        
          <li class="navbar-list-item"><a href="/">HOME</a></li>
        
      </ul>
    </div>
  </div>
</nav>

  
  

  
  

  
  

  
  

  
  
    <div class="header-content">
      <div class="post-text">
        <div class="type-wrap">
          
        </div>
        <h1 class="title-wrap">Roomæ•°æ®åº“çš„ä½¿ç”¨</h1>
        <h2 class="title-sub-wrap">
          <strong>Fuxinbo</strong>
          <span>å‘å¸ƒäº</span>
          
  <a href="javascript:;" class="article-date">
    <time datetime="2020-11-21T08:49:00.000Z" itemprop="datePublished">2020-11-21</time>
  </a>

        </h2>
      </div>
    </div>
  

  
  
  
</header>

    <!-- æ–‡ç«  -->

<!-- æ–‡ç« å†…å®¹ -->

<div class="body-container">
  <article class="content-container article-container">
    <div class="article-content">
      
      

      <section class="article-entry">
        <h2 id="å…³äºAndroidå®˜æ–¹çš„Roomæ•°æ®åº“æ¡†æ¶çš„ä½¿ç”¨"><a href="#å…³äºAndroidå®˜æ–¹çš„Roomæ•°æ®åº“æ¡†æ¶çš„ä½¿ç”¨" class="headerlink" title="å…³äºAndroidå®˜æ–¹çš„Roomæ•°æ®åº“æ¡†æ¶çš„ä½¿ç”¨"></a>å…³äºAndroidå®˜æ–¹çš„Roomæ•°æ®åº“æ¡†æ¶çš„ä½¿ç”¨</h2><h6 id="å…³äºRoom"><a href="#å…³äºRoom" class="headerlink" title="å…³äºRoom"></a>å…³äºRoom</h6><p> Roomæ˜¯ä¸€ä¸ªå¯¹è±¡å…³ç³»æ˜ å°„(ORM)åº“ã€‚RoomæŠ½è±¡äº†SQLiteçš„ä½¿ç”¨ï¼Œå¯ä»¥åœ¨å……åˆ†åˆ©ç”¨SQLiteçš„åŒæ—¶è®¿é—®æµç•…çš„æ•°æ®åº“ã€‚<br> Roomç”±ä¸‰ä¸ªé‡è¦çš„ç»„ä»¶ç»„æˆï¼šDatabaseã€Entityã€DAO</p>
<ul>
<li>Databaseï¼šåŒ…å«æ•°æ®åº“æŒæœ‰è€…ï¼Œå¹¶ä½œä¸ºä¸åº”ç”¨æŒä¹…å…³è”æ•°æ®çš„åº•å±‚è¿æ¥çš„ä¸»è¦è®¿é—®ç‚¹ã€‚è€Œä¸”Databaseå¯¹åº”çš„ç±»å¿…é¡»æ»¡è¶³ä¸‹é¢å‡ ä¸ªæ¡ä»¶ï¼š<br>Â 1. å¿…é¡»æ˜¯abstractç±»è€Œä¸”çš„extends RoomDatabaseã€‚<ol start="2">
<li>å¿…é¡»åœ¨ç±»å¤´çš„æ³¨é‡Šä¸­åŒ…å«ä¸æ•°æ®åº“å…³è”çš„å®ä½“åˆ—è¡¨(Entityå¯¹åº”çš„ç±»)ã€‚</li>
<li>åŒ…å«ä¸€ä¸ªå…·æœ‰0ä¸ªå‚æ•°çš„æŠ½è±¡æ–¹æ³•ï¼Œå¹¶è¿”å›ç”¨@Daoæ³¨è§£çš„ç±»ã€‚</li>
<li>åœ¨è¿è¡Œæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡Room.databaseBuilder() æˆ–è€… Room.inMemoryDatabaseBuilder()è·å–Databaseå®ä¾‹ã€‚</li>
</ol>
</li>
<li>Entityï¼šä»£è¡¨æ•°æ®åº“ä¸­æŸä¸ªè¡¨çš„å®ä½“ç±»ã€‚</li>
<li>DAOï¼šåŒ…å«ç”¨äºè®¿é—®æ•°æ®åº“çš„æ–¹æ³•ã€‚</li>
</ul>
<h5 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def room_version &#x3D; &quot;2.2.5&quot;</span><br><span class="line">implementation &quot;androidx.room:room-runtime:$room_version&quot;</span><br><span class="line">annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;</span><br></pre></td></tr></table></figure>
<h5 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h5><ol>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªBeanç±»ï¼Œç”¨æ¥åšä¸ºæ•°æ®åº“çš„è¡¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">@Entity(indices &#x3D; &#123;@Index(&quot;BookName&quot;)&#125;)</span><br><span class="line">public class BookBean &#123;</span><br><span class="line"></span><br><span class="line">    public BookBean()&#123; &#125;</span><br><span class="line"></span><br><span class="line">    public BookBean(String name,String autohor,Data data)&#123;</span><br><span class="line">        this.BookName &#x3D; name;</span><br><span class="line">        this.BookAuthor &#x3D; autohor;</span><br><span class="line">        this.data &#x3D; data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PrimaryKey(autoGenerate &#x3D; true)</span><br><span class="line">    private int BookId;</span><br><span class="line"></span><br><span class="line">    private String BookName;</span><br><span class="line">    private String BookAuthor;</span><br><span class="line">    private static Data data;</span><br><span class="line"></span><br><span class="line">    public int getBookId() &#123;</span><br><span class="line">        return BookId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBookId(int bookId) &#123;</span><br><span class="line">        BookId &#x3D; bookId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getBookName() &#123;</span><br><span class="line">        return BookName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBookName(String bookName) &#123;</span><br><span class="line">        BookName &#x3D; bookName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getBookAuthor() &#123;</span><br><span class="line">        return BookAuthor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBookAuthor(String bookAuthor) &#123;</span><br><span class="line">        BookAuthor &#x3D; bookAuthor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class Data&#123;</span><br><span class="line">        private String userName;</span><br><span class="line">        private int userId;</span><br><span class="line"></span><br><span class="line">        public String getUserName() &#123;</span><br><span class="line">            return userName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setUserName(String userName) &#123;</span><br><span class="line">            this.userName &#x3D; userName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int getUserId() &#123;</span><br><span class="line">            return userId;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setUserId(int userId) &#123;</span><br><span class="line">            this.userId &#x3D; userId;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@Entitydçš„æ³¨é‡Šä»£è¡¨æ•°æ®åº“ä¸­æŸä¸ªè¡¨çš„å®ä½“ç±»ã€‚é»˜è®¤æƒ…å†µä¸‹Roomä¼šæŠŠEntityé‡Œé¢æ‰€æœ‰çš„å­—æ®µå¯¹åº”åˆ°è¡¨ä¸Šçš„æ¯ä¸€åˆ—ã€‚å¦‚æœéœ€è¦åˆ¶å®šæŸä¸ªå­—æ®µä¸ä½œä¸ºè¡¨ä¸­çš„ä¸€åˆ—éœ€è¦æ·»åŠ @Ignoreæ³¨è§£ã€‚</li>
<li>@Index(â€œBookNameâ€)ä»£è¡¨è®¾ç½®æ•°æ®åº“ä¸­çš„ç´¢å¼•</li>
<li>@PrimaryKeyçš„æ³¨é‡Šä»£è¡¨æ•°æ®åº“ä¸­çš„ä¸»é”®</li>
<li>@PrimaryKeyçš„ï¼ˆautoGenerate = trueï¼‰è¡¨ç¤ºä¸»é”®è‡ªå¢</li>
</ul>
</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯åˆ›å»ºæ•°æ®åº“ç®¡ç†ç±»<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Database(entities &#x3D; &#123;BookBean.class&#125;, version &#x3D; 1)</span><br><span class="line">public abstract class AppDatabase extends RoomDatabase &#123;</span><br><span class="line">    public abstract BookDao userDao();</span><br><span class="line"></span><br><span class="line">    static final Migration MIGRATION_1_2 &#x3D; new Migration(1, 2) &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void migrate(SupportSQLiteDatabase database) &#123;</span><br><span class="line">           database.execSQL(&quot;ALTER TABLE bookBean ADD COLUMN  index_name&#39;BookName&#39; &quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@Databaseè¡¨ç¤ºå½“å‰ç±»ä¸ºæ•°æ®åº“ç®¡ç†ç±»</li>
<li>entities = {BookBean.class}è¡¨ç¤ºæ•°æ®åº“ç›¸å…³çš„æ‰€æœ‰Entityå®ä½“ç±»ï¼Œä»–ä»¬ä¼šè½¬åŒ–æˆæ•°æ®åº“é‡Œé¢çš„è¡¨ã€‚</li>
<li>version = 1è¡¨ç¤ºå½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬ï¼ˆæ¯å½“æ•°æ®åº“æ›´æ–°æ—¶ï¼Œç‰ˆæœ¬å·ä¹Ÿè¦å¯¹åº”å¢åŠ ï¼‰</li>
<li>public abstract BookDao userDao() è¿™ä¸ªåˆ™æ˜¯å¯¹åº”æ•°æ®åº“çš„æ“ä½œç±»</li>
<li>static final Migration MIGRATION_1_2 = new Migration(1, 2) è¿™ä¸ªæ˜¯æŒ‡å½“æ•°æ®åº“å‡çº§æ—¶ï¼Œä»ç‰ˆæœ¬1å‡çº§åˆ°ç‰ˆæœ¬2çš„å‡çº§è¿‡ç¨‹</li>
</ul>
</li>
<li>ä¹‹åå°±æ˜¯åˆ›å»ºæ•°æ®åº“çš„æ“ä½œç±»<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Dao</span><br><span class="line">public interface BookDao &#123;</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM bookbean&quot;)</span><br><span class="line">    Flowable&lt;List&lt;BookBean&gt;&gt; getAll();</span><br><span class="line"></span><br><span class="line">    @Query(&quot;SELECT * FROM bookbean WHERE BookId IN (:userIds)&quot;)</span><br><span class="line">    List&lt;BookBean&gt; loadAllByIds(int[] userIds);</span><br><span class="line"></span><br><span class="line">    @Query(&quot;update bookbean set bookauthor &#x3D; :value&quot;)</span><br><span class="line">    void setBookAuthor(boolean value);</span><br><span class="line"></span><br><span class="line">    @Insert</span><br><span class="line">    Completable insertAll(BookBean... users);</span><br><span class="line"></span><br><span class="line">    @Delete</span><br><span class="line">    Completable delete(BookBean user);</span><br><span class="line"></span><br><span class="line">    @Update</span><br><span class="line">    Completable updateUsers(BookBean... users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@Dao è¡¨ç¤ºè¿™ä¸ªç»„ä»¶ä»£è¡¨äº†ä½œä¸ºDAOçš„ç±»æˆ–è€…æ¥å£ã€‚DAOæ˜¯Roomçš„ä¸»è¦ç»„ä»¶ï¼Œè´Ÿè´£å®šä¹‰è®¿é—®æ•°æ®åº“çš„æ–¹æ³•ã€‚Roomä½¿ç”¨è¿‡ç¨‹ä¸­ä¸€èˆ¬ä½¿ç”¨æŠ½è±¡DAOç±»æ¥å®šä¹‰æ•°æ®åº“çš„CRUDæ“ä½œã€‚DAOå¯ä»¥æ˜¯ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚å¦‚æœå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒå¯ä»¥æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå°†RoomDatabaseä½œä¸ºå…¶å”¯ä¸€å‚æ•°ã€‚Roomåœ¨ç¼–è¯‘æ—¶åˆ›å»ºæ¯ä¸ªDAOå®ã€‚</li>
<li>@Queryå¯¹åº”æ•°æ®åº“çš„æŸ¥è¯¢ï¼Œåæ¥æŸ¥è¯¢è¯­å¥</li>
<li>@Insertå¯¹åº”æ•°æ®åº“çš„æ’å…¥</li>
<li>@Deleteå¯¹åº”æ•°æ®åº“çš„åˆ é™¤</li>
<li>@Updateå¯¹åº”æ•°æ®åº“çš„æ›´æ–°ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šå°†æ²¡æœ‰æ¶‰åŠåˆ°çš„å€¼è¿›è¡Œé‡ç½®</li>
<li>Completableè¿”å›å€¼æ˜¯ä¸ºäº†å’ŒRxJavaä¸€èµ·ä½¿ç”¨ï¼Œå¦‚æœä¸ä½¿ç”¨RxJavaåˆ™å†™æˆvoidæˆ–è€…å¯¹åº”ç±»å‹</li>
<li>Flowableä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸è¿‡è¿™ä¸ªè¿”å›ç±»å‹æ˜¯æ”¯æŒèƒŒå‹</li>
</ul>
</li>
<li>åœ¨Activity/Fragmentä¸­ä½¿ç”¨<ol>
<li>é¦–å…ˆä¸ºäº†é˜²æ­¢é‡å¤åˆ›å»ºæ•°æ®åº“ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿Application<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class MyApplication extends Application &#123;</span><br><span class="line">    private static AppDatabase db;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        super.onCreate();</span><br><span class="line">        db &#x3D; Room.databaseBuilder(getApplicationContext(),</span><br><span class="line">                AppDatabase.class, &quot;database-name&quot;)</span><br><span class="line">                &#x2F;&#x2F;.addMigrations(MIGRATION_1_2)</span><br><span class="line">                .build();</span><br><span class="line">        &#x2F;&#x2F;.allowMainThreadQueries()&#x2F;&#x2F;å…è®¸åœ¨ä¸»çº¿ç¨‹ä¸­æŸ¥è¯¢</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static AppDatabase getDatabase()&#123;</span><br><span class="line">        return db;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åœ¨éœ€è¦çš„Activity/Fragmentä¸­è·å–æ•°æ®åº“å®ä¾‹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line">   private ActivityMainBinding binding;</span><br><span class="line">   private AppDatabase db;</span><br><span class="line">   </span><br><span class="line">    @Override</span><br><span class="line">   protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">       super.onCreate(savedInstanceState);</span><br><span class="line">       binding &#x3D; DataBindingUtil.setContentView(this, R.layout.activity_main);</span><br><span class="line">       db &#x3D; MyApplication.getDatabase();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="RxJava-Room"><a href="#RxJava-Room" class="headerlink" title="RxJava+Room"></a>RxJava+Room</h5>ä¸€èˆ¬æ¥è¯´å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ˜¯ä¸è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå› ä¸ºå½“è¿›è¡Œå¤§é‡æ•°æ®åº“æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šå µå¡ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥é…åˆRxJavaæ¥ä½¿ç”¨</li>
</ol>
</li>
</ol>
<h5 id="æ·»åŠ ä¾èµ–-1"><a href="#æ·»åŠ ä¾èµ–-1" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; RxJava support for Room</span><br><span class="line">   implementation &quot;androidx.room:room-rxjava2:2.2.5&quot;</span><br><span class="line"></span><br><span class="line">   implementation &#39;io.reactivex.rxjava2:rxjava:2.0.6&#39;</span><br><span class="line">   implementation &#39;io.reactivex.rxjava2:rxandroid:2.0.1&#39;</span><br></pre></td></tr></table></figure>

<h5 id="ä½¿ç”¨RxJavaæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œ"><a href="#ä½¿ç”¨RxJavaæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œ" class="headerlink" title="ä½¿ç”¨RxJavaæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œ"></a>ä½¿ç”¨RxJavaæ¥è¿›è¡Œæ•°æ®åº“æ“ä½œ</h5><ul>
<li>å¢<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Completable completable &#x3D; db.userDao().insertAll(new BookBean(&quot;HTML(&quot; + i + &quot;)&quot;, &quot;jjj&quot;, data));</span><br><span class="line">                  completable.subscribeOn(Schedulers.io())</span><br><span class="line">                          .subscribe(new CompletableObserver() &#123;</span><br><span class="line">                              @Override</span><br><span class="line">                              public void onSubscribe(Disposable d) &#123;&#125;</span><br><span class="line"></span><br><span class="line">                              @Override</span><br><span class="line">                              public void onComplete() &#123;</span><br><span class="line">                                  Log.e(&quot;why&quot;, &quot;onClick: æ’å…¥æˆåŠŸ&quot;);</span><br><span class="line">                              &#125;</span><br><span class="line"></span><br><span class="line">                              @Override</span><br><span class="line">                              public void onError(Throwable e) &#123;</span><br><span class="line">                                  Log.e(&quot;why&quot;, &quot;onClick: æ’å…¥å¤±è´¥&quot; + e);</span><br><span class="line">                              &#125;</span><br><span class="line">                          &#125;);</span><br></pre></td></tr></table></figure>
ä¸Šè¿°æ“ä½œæ˜¯å¾€æ•°æ®åº“ä¸­æ·»åŠ äº†â€ä¸€æœ¬â€ä¹¦çš„ä¿¡æ¯</li>
<li>åˆ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Completable comparable &#x3D; db.userDao().delete(bean);</span><br><span class="line">                   comparable.subscribeOn(Schedulers.io())</span><br><span class="line">                           .subscribe(new CompletableObserver() &#123;</span><br><span class="line">                               @Override</span><br><span class="line">                               public void onSubscribe(Disposable d) &#123;</span><br><span class="line">                               &#125;</span><br><span class="line"></span><br><span class="line">                               @Override</span><br><span class="line">                               public void onComplete() &#123;</span><br><span class="line">                                   Log.e(&quot;why&quot;, &quot;onClick: åˆ é™¤æ•°æ®æˆåŠŸ&quot;);</span><br><span class="line">                               &#125;</span><br><span class="line"></span><br><span class="line">                               @Override</span><br><span class="line">                               public void onError(Throwable e) &#123;</span><br><span class="line">                                   Log.e(&quot;why&quot;, &quot;onClick: åˆ é™¤æ•°æ®å¤±è´¥&quot; + e);</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;);</span><br></pre></td></tr></table></figure>
ä¸Šè¿°æ“ä½œæ˜¯å¾€æ•°æ®åº“ä¸­åˆ é™¤äº†â€å…¨éƒ¨â€ä¹¦çš„ä¿¡æ¯</li>
<li>æ”¹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">for (BookBean bean : bookBean) &#123;</span><br><span class="line">                    bean.setBookName(&quot;JAVA&quot;);</span><br><span class="line">                    Completable completable &#x3D; db.userDao().updateUsers(bean);</span><br><span class="line">                    completable.subscribeOn(Schedulers.io())</span><br><span class="line">                            .subscribe(new CompletableObserver() &#123;</span><br><span class="line">                                @Override</span><br><span class="line">                                public void onSubscribe(Disposable d) &#123;</span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                @Override</span><br><span class="line">                                public void onComplete() &#123;</span><br><span class="line">                                    Log.e(&quot;why&quot;, &quot;onClick: æ›´æ–°æ•°æ®æˆåŠŸ&quot;);</span><br><span class="line">                                &#125;</span><br><span class="line"></span><br><span class="line">                                @Override</span><br><span class="line">                                public void onError(Throwable e) &#123;</span><br><span class="line">                                    Log.e(&quot;why&quot;, &quot;onClick: æ›´æ–°æ•°æ®å¤±è´¥&quot; + e);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;);</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure>
ä¸Šè¿°æ“ä½œæ˜¯å°†æŸ¥è¯¢åˆ°çš„æ•°æ®å¾ªç¯æ”¹å˜BookNameçš„å€¼ï¼Œåœ¨é€šè¿‡æ•°æ®åº“æ“ä½œæ¥æ›´æ–°â€å…¨éƒ¨â€æ•°æ®</li>
<li>æŸ¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">db.userDao().getAll()</span><br><span class="line">                       .subscribeOn(Schedulers.io())</span><br><span class="line">                       .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">                       .subscribe(new Consumer&lt;List&lt;BookBean&gt;&gt;() &#123;</span><br><span class="line">                           @Override</span><br><span class="line">                           public void accept(List&lt;BookBean&gt; bookBeans) throws Exception &#123;</span><br><span class="line">                               bookBean &#x3D; bookBeans;</span><br><span class="line">                               for (BookBean bean : bookBeans) &#123;</span><br><span class="line">                                   Log.e(&quot;why&quot;, &quot;onClick: æŸ¥è¯¢æˆåŠŸ,æ•°æ®ä¸º&quot; + bean.toString());</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;</span><br><span class="line">                       &#125;);</span><br></pre></td></tr></table></figure>
ä¸Šè¿°æ“ä½œæ˜¯å°†æŸ¥è¯¢åˆ°çš„æ•°æ®â€å…¨éƒ¨â€ä¿å­˜èµ·æ¥</li>
</ul>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨å†…å®¹</p>
</blockquote>

      </section>

      <section class="article-footer">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">#Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/" rel="tag">#SQL</a></li></ul>
      </section>

      <section class="article-navs">
        
<nav class="card-container card-article-nav">
  <div class="card-list">
    
      <div id="article-nav-newer" class="card-item">
        <article>
          
          <a class="card-link article-nav-link" href="/2020/12/17/Andorid%E7%9A%84%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%93%8D%E4%BD%9C-UI/"></a>
          <strong class="article-nav-caption">Newer</strong>
          <p class="article-nav-title">
            
              Andoridçš„å¤šçº¿ç¨‹æ“ä½œ/UI
            
          </p>
        </article>
      </div>
    
    
      <div id="article-nav-older" class="card-item">
        <article>
          
          <a class="card-link article-nav-link" href="/2020/10/21/%E5%B9%BF%E6%92%AD%E9%80%9A%E7%9F%A5%E5%BC%BA%E5%88%B6%E4%B8%8B%E7%BA%BF/"></a>
          <strong class="article-nav-caption">Older</strong>
          <p class="article-nav-title">
            
              å¹¿æ’­é€šçŸ¥å¼ºåˆ¶ä¸‹çº¿
            
          </p>
        </article>
      </div>
    
  </div>
</nav>

      </section>
    </div>
  </article>
</div>

    <!-- footer container -->
<footer id="footer" class="footer">
  <div class="footer-container">
    
    <div class="social-icons">
          </div>
     
    <p>&copy; 2021 <a href="/" target="_blank">Fuxinbo</a></p>

    
      <p id="hitokoto"></p>
      <script src="https://v1.hitokoto.cn/?c=a&amp;encode=js&select=%23hitokoto" defer></script>
    

    

    <p>Powered by <a href="https://hexo.io" target="_blank" rel="noopener noreferrer">Hexo</a> Theme - <a href="https://github.com/miiiku/flex-block" target="_blank" rel="noopener noreferrer author">flex-block</a></p>

    <p>
      <a href="javascript:;" id="theme-light">ğŸŒ æµ…è‰²</a>
      <a href="javascript:;" id="theme-dark">ğŸŒ› æ·±è‰²</a>
      <a href="javascript:;" id="theme-auto">ğŸ¤–ï¸ è‡ªåŠ¨</a>
    </p>
  </div>
</footer>
  </div>

  <div class="back-to-top-fixed">
    <svg class="icon icon-back-to-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M725.333333 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333333c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l213.333333 213.333333c17.066667 17.066667 17.066667 42.666667 0 59.733333C746.666667 422.4 738.133333 426.666667 725.333333 426.666667z"></path>
  <path d="M298.666667 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l213.333333-213.333333c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333333C320 422.4 311.466667 426.666667 298.666667 426.666667z"></path>
  <path d="M512 896c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 878.933333 537.6 896 512 896z"></path>
</svg> 
  </div>

  
  


  <!-- aplayer éŸ³é¢‘ start -->
  <link rel="stylesheet" href="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.css">
  <script type="text/javascript" src="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <script type="text/javascript">
    const aplayer = document.querySelectorAll(".aplayer");
    aplayer && initaplayer(aplayer);
    function initaplayer(els) {
      let elsArr = Array.from(els);
      elsArr.forEach(el => {
        let params = {
          container: el,
          audio: { ...el.dataset },
          theme: "#b7daff",
          autoplay: false,
          loop: false,
          mutex: true,
        }
        if (el.dataset.lrc) {
          params['lrcType'] = 3
        }
        new APlayer(params);
      });
    }
  </script>
  <!-- aplayer éŸ³é¢‘ end -->
  

<!-- dplayer è§†é¢‘ start -->
<script type="text/javascript" src="https://unpkg.com/hls.js@1.0.1/dist/hls.js"></script>
<script type="text/javascript" src="https://unpkg.com/dplayer@1.25.1/dist/DPlayer.min.js"></script>
<script type="text/javascript">
  const dplayer = document.querySelectorAll(".dplayer");
  dplayer && initDPlayer(dplayer);
  function initDPlayer(els) {
    let elsArr = Array.from(els);
    elsArr.forEach(el => {
      let url = el.dataset.url;
      let cover = el.dataset.cover;
      let subtitle = el.dataset.subtitle;

      let options = {
        container: el,
        video: { url: url, pic: cover },
        theme: "#b7daff",
        autoplay: false,
        loop: false,
        mutex: true,
      }

      if (subtitle) {
        options.subtitle = {
          url: el.dataset.subtitle,
        }
      }
      new DPlayer(options);
    });
  }
</script>
<!-- dplayer è§†é¢‘ end -->


<!-- waterfall ç€‘å¸ƒæµ start -->

<script src="/lib/waterfall.min.js"></script>

<script type="text/javascript">

const waterfalls = document.querySelectorAll(".waterfall-container");

if (waterfalls && waterfalls.length > 0) {
  waterfalls.forEach((waterfall, index) => {
    let cls = "waterfall-container-" + index;
    waterfall.classList.add(cls);
    initWaterfall(cls, waterfall);
  });
}

function initWaterfall(selector, el) {
  const options = {};
  if (Object.keys(el.dataset).length > 0) {
    for (let k in el.dataset) {
      options[k] = el.dataset[k];
    }
  }
  waterfall(`.${selector}`, options);
}
</script>
<!-- waterfall ç€‘å¸ƒæµ end -->


  <!-- zoom start -->
  
<script src="/lib/zoom.min.js"></script>

  <script type="text/javascript">
    document.querySelector(".article-content") && zoom(".article-content");
  </script>
  <!-- zoom end -->
  



  


  


  




<script src="/js/script.js"></script>


  
  <!-- å°¾éƒ¨ç”¨æˆ·è‡ªå®šä¹‰ç›¸å…³å†…å®¹ -->
</body>
</html>